{"is_source_file": true, "format": "JavaScript", "description": "This file contains API utility functions for a React frontend to communicate with a backend server, including user authentication, playlist management, track search, streaming URL generation, and play history logging.", "external_files": ["fetch (built-in browser API)", "localStorage (Web Storage API)", "process.env (Node.js environment variables in build process)"], "external_methods": ["localStorage.getItem", "fetch"], "published": ["signup", "signin", "getMe", "listPlaylists", "createPlaylist", "getPlaylist", "addTrackToPlaylist", "removeTrackFromPlaylist", "searchTracks", "streamUrl", "recentlyPlayed", "logPlay"], "classes": [], "methods": [{"name": "getToken()", "description": "Retrieves authentication token stored in localStorage, returns empty string if not found.", "scope": "", "scopeKind": ""}, {"name": "request(path, opts = {})", "description": "Performs an HTTP request to a specified API endpoint with optional additional fetch options, handles JSON parsing and error handling.", "scope": "", "scopeKind": ""}, {"name": "signup(email)", "description": "Registers a new user using email, returns token and user info.", "scope": "", "scopeKind": ""}, {"name": "signin(email)", "description": "Authenticates a user using email, returns token and user info.", "scope": "", "scopeKind": ""}, {"name": "getMe()", "description": "Fetches current user profile data.", "scope": "", "scopeKind": ""}, {"name": "listPlaylists()", "description": "Retrieves the list of user playlists.", "scope": "", "scopeKind": ""}, {"name": "createPlaylist(name, description = '')", "description": "Creates a new playlist with provided name and optional description.", "scope": "", "scopeKind": ""}, {"name": "getPlaylist(id)", "description": "Retrieves details of a specific playlist by ID.", "scope": "", "scopeKind": ""}, {"name": "addTrackToPlaylist(id, track)", "description": "Adds a track to a specified playlist, track details include id, title, artist, artwork.", "scope": "", "scopeKind": ""}, {"name": "removeTrackFromPlaylist(id, trackId)", "description": "Removes a track from a playlist by track ID.", "scope": "", "scopeKind": ""}, {"name": "searchTracks(q)", "description": "Performs a search query for tracks.", "scope": "", "scopeKind": ""}, {"name": "streamUrl(trackId)", "description": "Generates a streaming URL for a track, embedding the user token.", "scope": "", "scopeKind": ""}, {"name": "recentlyPlayed()", "description": "Fetches list of recently played tracks.", "scope": "", "scopeKind": ""}, {"name": "logPlay(track)", "description": "Logs a track play event with track details.", "scope": "", "scopeKind": ""}], "calls": ["request('/auth/signup', ...)", "request('/auth/signin', ...)", "request('/me')", "request('/playlists')", "request('/playlists', ...)", "request(`/playlists/${id}`)", "request(`/playlists/${id}/tracks`, ...)", "request(`/playlists/${id}/tracks/${encodeURIComponent(trackId)}`)", "request(`/search?q=${encodeURIComponent(q)}`)", "getToken()", "request('/recently-played')", "request('/recently-played', ...)"], "search-terms": ["JavaScript API functions", "playlist management", "track search", "streaming URL", "authentication", "frontend API utils"], "state": 2, "file_id": 13, "knowledge_revision": 34, "git_revision": "", "revision_history": [{"32": ""}, {"34": ""}], "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^const API_BASE = process.env.REACT_APP_API_BASE || 'http:\\/\\/localhost:3001\\/api';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^    'Content-Type': 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "request.headers", "scopeKind": "class"}, {"_type": "tag", "name": "addTrackToPlaylist", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export async function addTrackToPlaylist(id, track) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, track)"}, {"_type": "tag", "name": "artist_name", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^    artist_name: track.artist$/", "language": "JavaScript", "kind": "property", "scope": "logPlay.body", "scopeKind": "class"}, {"_type": "tag", "name": "artist_name", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^    artist_name: track.artist,$/", "language": "JavaScript", "kind": "property", "scope": "addTrackToPlaylist.body", "scopeKind": "class"}, {"_type": "tag", "name": "artwork_url", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^    artwork_url: track.artwork || null$/", "language": "JavaScript", "kind": "property", "scope": "addTrackToPlaylist.body", "scopeKind": "class"}, {"_type": "tag", "name": "audius_track_id", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^    audius_track_id: track.id,$/", "language": "JavaScript", "kind": "property", "scope": "addTrackToPlaylist.body", "scopeKind": "class"}, {"_type": "tag", "name": "audius_track_id", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^    audius_track_id: track.id,$/", "language": "JavaScript", "kind": "property", "scope": "logPlay.body", "scopeKind": "class"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^  const body = {$/", "language": "JavaScript", "kind": "class", "scope": "addTrackToPlaylist", "scopeKind": "class"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^  const body = {$/", "language": "JavaScript", "kind": "class", "scope": "logPlay", "scopeKind": "class"}, {"_type": "tag", "name": "createPlaylist", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export async function createPlaylist(name, description = '') {$/", "language": "JavaScript", "kind": "function", "signature": "(name, description = '')"}, {"_type": "tag", "name": "getMe", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export async function getMe() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getPlaylist", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export async function getPlaylist(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "getToken", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^function getToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^  const headers = {$/", "language": "JavaScript", "kind": "class", "scope": "request", "scopeKind": "class"}, {"_type": "tag", "name": "listPlaylists", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export async function listPlaylists() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "logPlay", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export async function logPlay(track) {$/", "language": "JavaScript", "kind": "function", "signature": "(track)"}, {"_type": "tag", "name": "recentlyPlayed", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export async function recentlyPlayed() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "removeTrackFromPlaylist", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export async function removeTrackFromPlaylist(id, trackId) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, trackId)"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^async function request(path, opts = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, opts = {})"}, {"_type": "tag", "name": "searchTracks", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export async function searchTracks(q) {$/", "language": "JavaScript", "kind": "function", "signature": "(q)"}, {"_type": "tag", "name": "signin", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export async function signin(email) {$/", "language": "JavaScript", "kind": "function", "signature": "(email)"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export async function signup(email) {$/", "language": "JavaScript", "kind": "function", "signature": "(email)"}, {"_type": "tag", "name": "streamUrl", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^export function streamUrl(trackId) {$/", "language": "JavaScript", "kind": "function", "signature": "(trackId)"}, {"_type": "tag", "name": "track_title", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^    track_title: track.title,$/", "language": "JavaScript", "kind": "property", "scope": "addTrackToPlaylist.body", "scopeKind": "class"}, {"_type": "tag", "name": "track_title", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-297904-297913/frontend_react_js/src/api.js", "pattern": "/^    track_title: track.title,$/", "language": "JavaScript", "kind": "property", "scope": "logPlay.body", "scopeKind": "class"}], "hash": "fa5bb3a89f5ee75f6e4593d6867d9106", "format-version": 4, "code-base-name": "frontend_react_js", "filename": "frontend_react_js/src/api.js", "fields": [{"name": "'Content-Type': 'application\\/json',", "scope": "request.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "artist_name: track.artist", "scope": "logPlay.body", "scopeKind": "class", "description": "unavailable"}, {"name": "artist_name: track.artist,", "scope": "addTrackToPlaylist.body", "scopeKind": "class", "description": "unavailable"}, {"name": "artwork_url: track.artwork || null", "scope": "addTrackToPlaylist.body", "scopeKind": "class", "description": "unavailable"}, {"name": "audius_track_id: track.id,", "scope": "addTrackToPlaylist.body", "scopeKind": "class", "description": "unavailable"}, {"name": "track_title: track.title,", "scope": "addTrackToPlaylist.body", "scopeKind": "class", "description": "unavailable"}]}